
# travis build file c/o ithlony

language: cpp
compiler:
  - gcc
  - clang
notifications:
  email:
#    recipients:
#      - one@example.com
#      - other@example.com
    on_success: change # [always|never|change] # default: change
    on_failure: change # [always|never|change] # default: always

before_install:
 - echo $HOME
 - pwd
 - ls -a
 - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
 - if [ $CXX = "clang++" ]; then sudo add-apt-repository -y ppa:h-rayflood/llvm; fi
 - sudo apt-get update -qq
 - if [ $CXX = "clang++" ]; then sudo apt-get install -qq libstdc++-4.8-dev clang-3.2; fi
 - if [ $GCCVER != "" ]; then sudo apt-get install -qq g++$GCCVER; fi
 - if [ $VALGRIND != "0" ]; then sudo apt-get install -qq valgrind; fi
 - git submodule update --init --recursive
 - wget https://github.com/ned14/boost-trunk/archive/release/Boost_1_54_0.tar.gz
 - tar zxf Boost_1_54_0.tar.gz
 - mv boost-trunk-release-Boost_1_54_0 $HOME/boost-trunk
 - BOOST="$HOME/boost-trunk"
 - BOOST_ROOT="$HOME/boost-trunk"
 - PROJECT_ROOT=`pwd`
 - export BOOST_ROOT
 - export BOOST
 - export PROJECT_ROOT

#create symbolic links for project
 - ln -s $PROJECT_ROOT/include/boost/genetics $BOOST/boost/genetics
 - ln -s $PROJECT_ROOT $BOOST/libs/genetics

 - ls -l $BOOST/libs/
 - ls -l $BOOST/boost/

# install boost build
 - cd $BOOST/tools/build/v2
 - ./bootstrap.sh
 - sudo ./b2 install

script:

#build boost.test
 - cd $BOOST
 - ./bootstrap.sh
 - b2 stage --with-test toolset=$CC$GCCVER link=static release --threading=single

#build testcases
 - cd $BOOST/libs/genetics
 - ls -a
 - b2




